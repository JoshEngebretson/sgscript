
global ERRORS;
global tests_failed, tests_ran;

//
function section( x ){ print( "\n\t<< ", x, " >>\n" ); }
print( "\n\n-- CORE FUNCTIONS --\n" );
include_library( "type" );
//

	section( "include_shared" );
testEqual( include_shared( "bin/sgstest.exe" ), true, "include_shared - sgscript_main call [1]" );
testEqual( imported_var, 1337, "include_shared - sgscript_main call [2]" );

	section( "import_cfunc" );
testEqual( typeof( import_cfunc( "bin/sgstest.exe", "sgscript_main" ) ), "cfunc", "import_cfunc - retrieval of entry point" );
ERRORS = ""; testEqual( import_cfunc( "bin/nosuchfile", "sgscript_main" ), null, "import_cfunc - invalid file name" ); testEqual( ERRORS, "[W:import_cfunc() - file not found]" );
ERRORS = ""; testEqual( import_cfunc( "bin/sgstest.exe", "nosuchfunc" ), null, "import_cfunc - invalid function name" ); testEqual( ERRORS, "[W:import_cfunc() - procedure not found]" );


//
print( "\n\nTesting finished!\nRan ", tests_ran, " tests of which ", tests_failed, " failed.\n" );
//
