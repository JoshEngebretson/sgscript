<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
	<html><head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>SGScript tutorial</title>
		<link rel="stylesheet" type="text/css" href="docs.css">
		<script type="text/javascript" src="docs.js"></script>
	</head><body>
	<h1>SGScript tutorial</h1><div>
<div class='item'><a name='Table-of-Contents-toc'></a><hr><h2>Table of Contents</h2><ul><li><a href="#The-language">The language</a> - learn all you need to know to write SGScript code
<ul><li><a href="#The-basics">The basics</a> - quickly covers the basics but doesn&#39;t get into much detail
</li><li><a href="#Data-types">Data types</a> - handling all kinds of data
</li><li><a href="#Flow-control">Flow control</a> - how to run a part of the code, at specific moments
</li><li><a href="#Advanced-concepts">Advanced concepts</a> - not the first necessary things, helpful nonetheless
</li></ul><li><a href="#Building-with-SGScript">Building with SGScript</a> - find out how to build SGScript and integrate it into your project
<ul><li><a href="#Building-with-GNU-Make">Building with GNU Make</a>
</li></ul><li><a href="#Using-the-C-API">Using the C API</a> - interacting natively with the virtual machine</li></ul></div>
<div class='item'><a name='The-language'></a><hr><h2>The language</h2><pre>println( &quot;Hello, world!&quot; );</pre><p>
SGScript is a dynamic, procedural language, similar in syntax to many other programming languages, including C and JavaScript. It consists of various operations and structures that can be combined to specify operations and data that they use.
</p><ul><li><a href="#The-basics">The basics</a> - quickly covers the basics but doesn&#39;t get into much detail
</li><li><a href="#Data-types">Data types</a> - handling all kinds of data
</li><li><a href="#Flow-control">Flow control</a> - how to run a part of the code, at specific moments
</li><li><a href="#Advanced-concepts">Advanced concepts</a> - not the first necessary things, helpful nonetheless</li></ul></div>
<div class='item'><a name='The-basics'></a><hr><h2>The basics</h2><ul><li>Functions are reusable blocks of code. To call a function means to do what&#39;s specified in the function.</li></ul><pre>function printText()
{
	println( &quot;text&quot; );
}
printText();</pre><ul><li>Basic function definitions have the following syntax: <code>function &lt;name&gt; ( &lt;argument-list&gt; ) { &lt;code&gt; }</code>
</li><li>Argument list is a comma-separated list of names or nothing.
</li><li>Names, also called &quot;identifiers&quot;, can have the folowing symbols: a-z, A-Z, _, 0-9, but they cannot start with a digit, because only numbers can start with a digit.
</li><li>User-defined names cannot collide with so-called keywords - special names, like <code>function</code></li></ul><pre>y = 15.51;
x = 3 * y + 10;
x * y;</pre><ul><li>Each expression statement ends with &quot;;&quot;.
</li><li>Useful expression statements include an assignment operator or a function call, or both.
</li><li>All expression statements presented so far - except the last one - are useful.
</li><li>The assignment operator is &quot;=&quot;. It simply assigns the value on the right side to the item on the left side.
</li><li>Numbers use the point (&quot;.&quot;) as decimal digit separator.
</li><li>There are arithmetic operators available that take two items at each side (called &quot;binary operators&quot;).
</li><li>The operators used in the example are those of addition (&quot;+&quot;) and multiplication (&quot;*&quot;).</li></ul><pre>include &quot;math&quot;;
function sinc( x )
{
	xpi = x * M_PI;
	return sin( xpi ) / xpi;
}
sinc3 = sinc( 3 );</pre><ul><li>Functions may return with or without data. When they do return data, that data can be retrieved from the call.
</li><li>A basic function call has the syntax <code>&lt;name&gt; &lt;subexpression&gt;</code>
</li><li>A subexpression has the syntax <code>( &lt;expression-list&gt; )</code>
</li><li>Expression list is a comma-separated list of expressions or nothing.
</li><li>The <code>include</code> statement loads a library or a code file.
</li><li><code>math</code> is one of the few built-in libraries. In this example, it defines the function <code>sin</code> and the constant <code>M_PI</code></li></ul><pre>x = 1; y = 2;
x += y;
++x;
--y;</pre><ul><li>Shortcuts exist for common operations: combined assignment operators and increment/decrement operators.
</li><li>Most non-assignment binary operators have their assignment counterparts. The difference is that they assign the calculated value to the left side of the expression.
</li><li>Increment/decrement operators are shortcuts for <code>x += 1</code> and <code>x -= 1</code>, respectively.
<ul><li>There are alternative versions of these operators that will be covered later.</li></ul></li></ul><pre>x = 5; y = 3;
x *= y * ( y + x );
y -= x + x * y;
y += 5 * y += y;
printvar( y );
println( dumpvar( x ) );</pre><ul><li>There&#39;s very few limits on how the expressions can be combined so it&#39;s up to you to write them in a way the meaning is clear both to you and the compiler.
</li><li>A very useful tool for finding out the contents of a variable are the <code>printvar</code> / <code>dumpvar</code> functions.
</li><li><code>println</code> is a function that prints the given variables to standard output and moves write cursor to the next line.
</li><li>Order of arithmetic operations is mathematically correct: sub-expressions <code>( .. )</code> are evaluated first, then multiplication <code>*</code> / division <code>/</code> / modulo (remainder) <code>%</code> , and then - addition <code>+</code> and subtraction <code>-</code> .</li></ul><pre>x = 5;
global y = 6;
function z()
{
	a = 7;
	global b = 8;
	function c(){}
}</pre><ul><li>Variables are the currency of this language.
</li><li>There are 4 types of variable storage, two of which are covered in the example: local and global variables.
</li><li>In the example, variables x, a, c are local and y, z, b are global.
<ul><li>All new variables are local by default.
</li><li>The keyword <code>global</code> specifies a list of variables that are global and allows to assign their values.
</li><li>A function definition creates a global function variable outside other functions, local otherwise.</li></ul></li></ul><pre>// testing the assignment operator
a = 5;
/* this ----------
-- should print --
------------- 5 */
println( a ); ////</pre><ul><li>Code can contain comments. They can be used to communicate between various users and maybe even compilers of the code.
<ul><li>The SGScript compiler completely ignores comments.
</li></ul><li>There are two types of comments: single-line comments <code>// ...</code> and multiline comments <code>/<i> ... </i>/</code></li></ul></div>
<div class='item'><a name='Data-types'></a><hr><h2>Data types</h2><pre>a = null;
b = true;
c = 123;
d = 123.456;
e = &quot;text&quot;;</pre><ul><li>There&#39;s a total of 9 data types in SGScript: null, boolean, integer, real number, string, function, C function, object and pointer.
</li><li><code>null</code> is the &#39;no value&#39; type. There is only one value for the type.
</li><li>Boolean is a <code>true</code>/<code>false</code> type.
</li><li>Integers and real numbers are two ways to represent numbers in the language. Both have their uses, however generally they&#39;re interchangable.
</li><li>The <code>string</code> type stores an array of bytes, generally meant to store text but can be used for any data.</li></ul><pre>f = function(){ return 4; };
g = println;
h = io_file(); // returns a file object
i = toptr(100);</pre><ul><li>Functions and C functions are not as much data types as they are code types. One represents a function defined in SGScript code and another represents a function defined in C/C++ code.
<ul><li>As with numbers, both function types are generally interchangable but have some major differences.
</li></ul><li>Objects are universal, yet somewhat heavy types with a variable number of subtypes. They can represent data structures as well as interfaces and even act like functions.
</li><li>Pointers are basically integers that have restricted manipulation capabilities and a separate processing chain, useful for passing handles and memory addresses in a safe way.</li></ul><pre>arr = [ 1, 3, 5, 7 ];
println( arr[2] ); // prints 5
println( arr[4] ); // warning: index out of bounds
println( arr.size ); // prints 4</pre><ul><li>Array is a complex data type, a subtype of object. It contains a list of other variables.
</li><li>Sub-variables can be accessed with index <code>[ .. ]</code> and property <code>.</code> operators.
<ul><li>Be aware that not all sub-variables can be read and not all of them can be written. Systems will often report the same warnings for variables that don&#39;t exist and those that don&#39;t support the required operation.
</li></ul><li>The array&#39;s <code>size</code> property returns the length of the array, the number of variables in it.</li></ul><pre>arr = [];
arr.push( 5 );
x = arr.pop();
arr.unshift( 4 );
y = arr.shift();</pre><ul><li>Objects can have methods. Methods can be called through property access, this compiles to a special call where the object is passed through a special channel.
</li><li>Other sub-variable accessors don&#39;t support the method call, however it is possible to invoke in other ways, to be described in further sections.
</li><li>Array methods shown in the example are the stack/queue interface of the array. Push/pop deals with the end of the array, shift/unshift works on the beginning.
</li><li>More info on array and its methods can be found in the documentation: <a href="sgscript.docs.htm#array-object" target="_blank">array [object]</a></li></ul></div>
<div class='item'><a name='Flow-control'></a><hr><h2>Flow control</h2><pre>if( a &gt; 5 )
{
	println( &quot;&#39;a&#39; is greater than 5&quot; );
	if( a &lt; 10 )
		println( &quot;...but less than 10&quot; );
}
else
	println( &quot;&#39;a&#39; is not greater than 5&quot; );</pre><ul><li>It is possible to only run code if a certain condition is true, using the <code>if</code> statement.
</li><li>If/else statement has the following syntax: <code>if ( &lt;expression&gt; ) &lt;statement&gt;</code>, optionally followed by <code>else &lt;statement&gt;</code>
</li><li><code>{ .. }</code> is a block statement, it can be used anywhere a statement can be used
</li><li><code>&gt;</code> (&quot;greater than&quot;) is one of 8 comparison operators. The others are:
<ul><li><code>&lt;</code> - &quot;less than&quot;
</li><li><code>&gt;=</code> - &quot;greater or equal&quot;
</li><li><code>&lt;=</code> - &quot;less or equal&quot;
</li><li><code>==</code> - &quot;equal&quot;
</li><li><code>!=</code> - &quot;not equal&quot;
</li><li><code>===</code> - &quot;strict equality&quot; (not only value must be equal, types must also be same)
</li><li><code>!==</code> - &quot;strict inequality&quot; (inverse of strict equality)
</li></ul><li>These operators are not limited to <code>if</code> and other such statements, they can be used as any other operator.
</li><li>These operators return the type <code>bool</code>, it has only two values - <code>true</code> and <code>false</code></li></ul><pre>while( a &gt; 5 )
{
	println( a );
	--a;
}
for( i = 0; i &lt; 5; ++i )
	println( i );</pre><ul><li>There are 6 kinds of loops in SGScript:
<ul><li>The &#39;while&#39; loop: <code>while ( &lt;expression&gt; ) &lt;statement&gt;</code>
</li><li>The &#39;for&#39; loop: <code>for ( &lt;expression-list&gt; ; &lt;expression&gt; ; &lt;expression-list&gt; ) &lt;statement&gt;</code>
<ul><li>It is a shortcut for a while loop where first expression/list is run before the loop, second - as the condition, third - before each jumpback.
</li></ul><li>The &#39;do-while&#39; loop: <code>do &lt;statement&gt; while ( &lt;expression&gt; )</code>
</li><li>The &#39;foreach-value&#39; loop: <code>foreach ( &lt;name&gt; : &lt;expression&gt; ) &lt;statement&gt;</code>
</li><li>The &#39;foreach-key&#39; loop: <code>foreach ( &lt;name&gt; , : &lt;expression&gt; ) &lt;statement&gt;</code>
</li><li>The &#39;foreach-key-value&#39; loop: <code>foreach ( &lt;name&gt; , &lt;name&gt; : &lt;expression&gt; )</code></li></ul></li></ul></div>
<div class='item'><a name='Advanced-concepts'></a><hr><h2>Advanced concepts</h2><h4>Bitwise operations</h4><pre>hex = 0x12400;
bin = 0b10011010;
b_or = hex | bin ^ hex &amp; bin;</pre><ul><li>There are constant formats and bitwise operations for dealing with integers on the bit level.
</li><li>The following <i>integer</i> constant formats are available:
<ul><li>Binary (base 2): begins with &quot;0b&quot;, followed by some binary digits (0,1)
</li><li>Octal (base 8): begins with &quot;0o&quot;, followed by some octal digits (0-7)
</li><li>Decimal (base 10): contains only decimal digits (0-9)
</li><li>Hexadecimal (base 16): begins with &quot;0x&quot;, followed by some hexadecimal digits (0-9,a-f,A-F)
</li></ul><li>These operators are available for doing bitwise operations:
<ul><li>binary AND / AND-assign: <code>&amp;, &amp;=</code> - returns 1 if both sides are 1
</li><li>binary OR / OR-assign: <code>|, |=</code> - returns 1 if any side is 1
</li><li>binary XOR / XOR-assign: <code>^, ^=</code> - returns 1 if either side is 1, but not both
</li><li>unary NOT: <code>~</code> - inverts bits
</li><li>left shift / left shift-assign: <code>&lt;&lt;, &lt;&lt;=</code> - move all bits to the left (more significant positions)
</li><li>right shift / right shift-assign: <code>&gt;&gt;, &gt;&gt;=</code> - move all bits to the right (less significant positions)</li></ul></li></ul><p>
<em class='notice-bgr'>The main difference from other languages is that the integer type by default is 64 bits long. Left/right shift rules are equal to those of the C language. Thus, it is safe to use only shift distances between 0 and 63.</em>
</p><p>
Truth tables for AND/OR/XOR operations
</p><p>
<table>
<tr><th>AND</th><th>0</th><th>1</th><td>&nbsp;</td><th>OR</th><th>0</th><th>1</th><td>&nbsp;</td><th>XOR</th><th>0</th><th>1</th></tr>
<tr><th>0</th><td>0</td><td>0</td><td>&nbsp;</td><th>0</th><td>0</td><td>1</td><td>&nbsp;</td><th>0</th><td>0</td><td>1</td></tr>
<tr><th>1</th><td>0</td><td>1</td><td>&nbsp;</td><th>1</th><td>1</td><td>1</td><td>&nbsp;</td><th>1</th><td>1</td><td>0</td></tr>
</table>
</p></div>
<div class='item'><a name='Building-with-SGScript'></a><hr><h2>Building with SGScript</h2><p>
This section describes all supported ways to compile SGScript and integrate it into your project.
</p><ul><li><a href="#Building-with-GNU-Make">Building with GNU Make</a>
</li><li><a href="#Building-with-IDEs">Building with IDEs</a>
</li><li><a href="#Building-with-other-tools">Building with other tools</a>
</li><li><a href="#Including-SGScript-into-your-project">Including SGScript into your project</a></li></ul></div>
<div class='item'><a name='Building-with-GNU-Make'></a><hr><h2>Building with GNU Make</h2><h4>Required software</h4><ul><li><a href="http://www.gnu.org/software/make/" target="_blank">GNU Make</a>
</li><li><a href="http://gcc.gnu.org/" target="_blank">GCC</a>
</li><li>On Windows, <a href="http://www.mingw.org/" target="_blank">MinGW</a> can be used (it includes both).</li></ul><h4>Building</h4><ul><li>Open a terminal window in file root.
</li><li>Run <code>make</code> (<code>mingw32-make</code> on windows), optionally specifying targets and options.
</li><li>On Windows, a batch file can be used to enable the usage of <code>make</code> (create a file <code>make.bat</code> in <code>C:\MinGW\bin</code> directory or equivalent, add the directory to PATH if it&#39;s not there):</li></ul><pre>@ECHO OFF
mingw32-make %*</pre><h4>Build options</h4><p>
Targets:
</p><ul><li>libraries &amp; tools
<ul><li>&lt;no target&gt;: build just the library
</li><li>xgmath: build <a href="sgs.xgmath.docs.htm" target="_blank">eXtended Game Math library</a>
</li><li>json: build <a href="sgs.json.docs.htm" target="_blank">JSON library</a>
</li><li>pproc: build <a href="sgs.pproc.docs.htm" target="_blank">Parallel Processing library</a>
</li><li>sockets: build <a href="sgs.sockets.docs.htm" target="_blank">Sockets library</a>
</li><li>meta: build <a href="sgs.meta.docs.htm" target="_blank">Metaprogramming helper library</a>
</li><li>vm: build the <a href="sgscript.docs.htm#Virtual-Machine-sgsvm" target="_blank">virtual machine (sgsvm)</a>
</li><li>c: build the <a href="sgscript.docs.htm#Compiler-sgsc" target="_blank">compiler (sgsc)</a>
</li><li>sgsexe: build <a href="sgscript.docs.htm#Executable-generator-for-Windows-sgsexe" target="_blank">SGScript EXE builder</a>
</li></ul><li>testing
<ul><li>build_test: build <a href="sgscript.docs.htm#Language-test-application-sgstest" target="_blank">language test application</a>
</li><li>build_apitest: build <a href="sgscript.docs.htm#API-test-application-sgsapitest" target="_blank">API test application</a>
</li><li>build_cppbctest: build <a href="sgscript.docs.htm#C-binding-compiler-test-application-sgscppbctest" target="_blank">C++ binding compiler test application</a>
</li><li>build_cppbindtest: build <a href="sgscript.docs.htm#Lightweight-C-binding-test-application-sgscppbindtest" target="_blank">lightweight C++ binding test application</a>
</li><li>build_mttest: build <a href="sgscript.docs.htm#Multithreading-safety-test-application-mttest" target="_blank">multithreading safety test application</a>
</li><li>test: build and run <a href="sgscript.docs.htm#Language-test-application-sgstest" target="_blank">language test application</a>
</li><li>apitest: build and run <a href="sgscript.docs.htm#API-test-application-sgsapitest" target="_blank">API test application</a>
</li><li>cppbctest: build and run <a href="sgscript.docs.htm#C-binding-compiler-test-application-sgscppbctest" target="_blank">C++ binding compiler test application</a>
</li><li>cppbindtest: build and run <a href="sgscript.docs.htm#Lightweight-C-binding-test-application-sgscppbindtest" target="_blank">lightweight C++ binding test application</a>
</li><li>mttest: build and run <a href="sgscript.docs.htm#Multithreading-safety-test-application-mttest" target="_blank">multithreading safety test application</a>
</li></ul><li>other
<ul><li>clean: clean all generated files
</li><li>clean_obj: clean only intermediate build files
</li><li>clean_objbin: clean intermediate build files and binaries</li></ul></li></ul><p>
Options:
</p><ul><li>arch=[32|64] - target architecture (x86/x64), default depends on compiler
</li><li>mode=[debug|release] - whether it&#39;s a debug or a release build (default=debug)
</li><li>static=[1|0] - whether to build a static library or a dynamic one (default=0: dynamic)</li></ul><h4>Additional build options &amp; platforms</h4><ul><li>To build on Android, modify the makefile according to the comment in the beginning of that file.</li></ul></div>
<div class='item'><a name='Building-with-IDEs'></a><hr><h2>Building with IDEs</h2><p>
All IDE-related build data is under the <code>build</code> directory.
</p><h4>Supported IDEs</h4><ul><li>Code::Blocks (<code>build/codeblocks</code>)
</li><li>Visual Studio 2010 (and newer versions) (<code>build/vc10</code>)</li></ul><h4>IDEs with necessary files but without support</h4><ul><li>XCode (<code>build/xcode</code>)</li></ul></div>
<div class='item'><a name='Building-with-other-tools'></a><hr><h2>Building with other tools</h2><h4>CMake</h4><p>
There is a file <code>CMakeLists.txt</code> in the root directory of the project. It only builds the dynamic library at the moment.
</p><h4>File integration</h4><p>
The code is made to support various compilers and compile under C and C++ so it is quite safe to just drag &amp; drop it into your project.
</p></div>
<div class='item'><a name='Including-SGScript-into-your-project'></a><hr><h2>Including SGScript into your project</h2><p>
There are generally two ways to include SGScript: link the library or include the files directly.
</p><p>
<em class='notice-bgr'>Note: Including the files isn&#39;t an option if SGScript modules are to be used.</em>
</p><p>
For simplified inclusion of files, add <code>src/</code> and <code>ext/</code> to the include paths.
</p><ul><li>The main SGScript API is defined in the file <code>src/sgscript.h</code>.
<ul><li>Requires the SGScript library to be linked to the project or have the files (<code>src/*</code>) compiled in.
</li></ul><li>Utility library is available in <code>src/sgs_util.h</code>.
<ul><li>Requires the SGScript library to be linked to the project or have the files (<code>src/*</code>) compiled in.
</li></ul><li>XGMath library can be found in <code>ext/sgsxgmath.h</code>.
<ul><li>Requires the XGMath library to be linked to the project or have the files (<code>ext/sgsxgmath.c</code>) compiled in.</li></ul></li></ul></div>
</div>
	</body></html>
	